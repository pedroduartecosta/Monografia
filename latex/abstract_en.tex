\chapter*{Abstract}

The Blockchain concept was proposed as a way of processing and recording financial transactions in a peer-to-peer network while avoiding the double-spending problem and without requiring any centralized authority. Later, smart contracts were introduced as immutable applications whose terms are directly written in lines of code that are persisted and run on the Blockchain.

However, currently, smart contracts lack an important feature: internet connectivity. Due to the deterministic nature of Blockchain and the incompatible indeterministic nature of the Web, smart contracts cannot directly query it.

Oracles solve the connectivity problem, by listening to events produced by smart contracts, they can insert the needed information on the Blockchain to later be used by the contracts. But oracles do not abide by the same rules and do not support the same guarantees given by Blockchain, so they must either be trusted without hard guarantees about the truthfulness of the data that they provide or we must find ways of guaranteeing their honesty.

In order to find out how blockchain oracles are being designed, a systematic literature review was performed. This review produced fewer oracle solutions than expected, and, therefore, the author also searched for projects created by the industry. Existing oracle solutions rely on two main solutions: authenticity proofs, which are cryptographic proofs that something actually happened, or wisdom-of-the-crowd solutions based on incentives and penalising bad behaviour.

Bearing this in mind, this dissertation contribution is threefold.

Firstly, it analyses and summarises the existing authenticity proofs and mechanisms for guaranteeing oracle trust, allowing a smart contract developer to be fully informed of the implications of using each proof and their limitations.

Secondly, it defines four possible architectures for oracle design and how each of them addresses different points of trust in the oracle. Starting from the use of a third-party the author identifies and describes two architectures: \textit{Oracle-as-a-Service w/Single Data Feed} and \textit{Oracle-as-a-service w/Multiple Data Feeds}. Then the author describes a self-hosted approach with another two architectures: \textit{Single-Party Self Hosted Oracle} and \textit{Multi-Party Self Hosted Oracle}. This way, the author creates a guide that can support those creating blockchain oracles in thinking about the many limitations, trade-offs and possibilities that are inherent to the design of such kinds of system.

Finally, as the author worked on each architecture he found existing oracle solutions that would fit in the first two, regarding third-party providers, and later a new project focusing on the development of the third architecture. Regarding this, the author decided to implement the fourth architecture, both because no existing solution was available and because doing would demonstrate the viability of this new architecture.

In conclusion, this dissertation paves the way for oracle development and research summarising firstly in a broad sense existing solutions and later contributing with a systematic set of architectures and a solution that can be easily adopted by teams interested in deploying their own oracle to achieve higher standards of trust.


\chapter*{Resumo}


O conceito de Blockchain foi proposto como uma forma de processar e registrar transações financeiras numa rede \textit{peer-to-peer}, evitando o problema de \textit{double-spending} e sem exigir qualquer autoridade centralizada. Mais tarde, os \textit{smart contracts} foram introduzidos como aplicações mutáveis cujos termos são escritos diretamente em linhas de código que são persistidas e executadas na Blockchain.


No entanto, atualmente, os \textit{smart contracts} carecem de um recurso importante: a ligação à Internet. Devido à natureza determinística da Blockchain e à natureza não-determinística da Web, os \textit{smart contracts} não podem consultá-la diretamente.

Oracles resolvem o problema de conectividade; ouvindo eventos produzidos por \textit{smart contracts}, os oracles inserem as informações necessárias na Blockchain para depois serem usadas pelos contratos. Mas os oracles não cumprem as mesmas regras e não suportam as mesmas garantias dadas pela Blockchain e, desta forma, ou é possível confiar-se na sua execução sem garantias concretas sobre a veracidade dos dados que fornecem, ou é necessário encontrar outras formas de garantir a sua honestidade.

A fim de descobrir como os \textit{blockchain oracles} são atualmente desenvolvidos, foi realizada uma revisão sistemática da literatura científica e de projetos criados pela indústria. As soluções existentes de oracles recorrem a: provas de autenticidade, que são provas criptográficas de que algo realmente aconteceu, ou soluções de \textit{wisdom-of-the-crowd} baseadas em incentivos.

Com isto, esta dissertação contribui em três frentes.

Em primeiro lugar, analisa e resume as provas de autenticidade existentes e mecanismos para garantir a confiança de oracles, permitindo que um desenvolvedor de \textit{smart contracts} seja totalmente informado sobre as implicações de usar cada prova e suas limitações.

Em segundo lugar, define quatro arquiteturas possíveis para desenhar oracles e como cada uma delas aborda diferentes pontos de confiança no oracle. O autor identifica e descreve duas arquiteturas que utilizam serviços de terceiros: \textit{Oracle-as-a-Service com Single Data Feed} e \textit{Oracle-as-a-service com Multiple Data Feeds} . Em seguida, o autor descreve uma abordagem auto-hospedada com outras duas arquiteturas: \textit{Single-Party Self Hosted Oracle} e \textit{Multi-Party Self Hosted Oracle}. Estas arquiteturas constituem um guia, capaz de apoiar aqueles que criam oracles de blockchain a pensar sobre as limitações, trade-offs e possibilidades inerentes ao design de soluções de oracles.

Por fim, como o autor apenas encontrou casos de uso existentes para as três primeiras arquiteturas, decidiu implementar a quarta arquitetura. Isto porque nenhuma solução existente estava disponível e porque isso demonstraria a viabilidade da nova arquitetura proposta.

Em conclusão, esta dissertação abre o caminho para o desenvolvimento de oracles e descreve inicialmente soluções existentes e posteriormente contribui com um conjunto sistemático de arquiteturas e uma solução que pode ser facilmente adotada por equipas interessadas em desenvolver o seu próprio oracle para alcançar padrões mais elevados de confiança.

%Seguem-se umas notas breves mas muito importantes sobre a versão
%provisória e a versão final do documento.
%A versão provisória, depois de verificada pelo orientador e de
%corrigida em contexto pelo autor, deve ser publicada na página
%pessoal de cada estudante/dissertação, juntamente com os dois
%resumos, em português e em inglês; deve manter a marca da água,
%assim como a numeração de linhas conforme aqui se demonstra.

%A versão definitiva, a produzir somente após a defesa, em versão
%impressa (dois exemplares com capas próprias FEUP) e em versão
%eletrónica (6 CDs com "rodela" própria FEUP), deve ser limpa da marca de
%água e da numeração de linhas e deve conter a identificação, na primeira
%página, dos elementos do júri respetivo.
%Deve ainda, se for o caso, ser corrigida de acordo com as instruções
%recebidas dos elementos júri.
